import{a as F,b as R,c as u,d as T,e as y,f as P,g,h as E,i as M,j as k,k as q,l as N}from"./chunk-DVK7NLWK.js";import{$a as l,Ba as i,Fb as x,Hb as b,Ka as p,Oa as d,Pa as r,Sa as s,Ta as a,Ua as f,Xa as v,Ya as C,_ as h,aa as _,bb as w,fb as S}from"./chunk-7FIF2LK4.js";function L(e,t){e&1&&l(0," UserId is required ")}function V(e,t){e&1&&l(0," UserId should have at least 4 characters ")}function G(e,t){if(e&1&&(s(0,"div",9),d(1,L,1,0)(2,V,1,0),a()),e&2){let n=C();i(1),r(1,n.formControls.userid.errors.required?1:-1),i(1),r(2,n.formControls.userid.errors.minlength?2:-1)}}function D(e,t){e&1&&l(0," Password is required ")}function I(e,t){e&1&&l(0," Password should have at least 6 characters ")}function U(e,t){if(e&1&&(s(0,"div",9),d(1,D,1,0)(2,I,1,0),a()),e&2){let n=C();i(1),r(1,n.formControls.password.errors.required?1:-1),i(1),r(2,n.formControls.password.errors.minlength?2:-1)}}function A(e,t){e&1&&l(0," Confirm password is required ")}function j(e,t){e&1&&l(0," Confirm password should have at least 6 characters ")}function z(e,t){if(e&1&&(s(0,"div",9),d(1,A,1,0)(2,j,1,0),a()),e&2){let n=C();i(1),r(1,n.formControls.confirmPassword.errors.required?1:-1),i(1),r(2,n.formControls.confirmPassword.errors.minlength?2:-1)}}function B(e,t){e&1&&(s(0,"div",9),l(1,"Password and confirm password not match"),a())}function H(e,t){if(e&1&&(s(0,"div",10)(1,"span"),l(2),a()()),e&2){let n=C();p("ngClass",n.status.ok?"alert-info":"alert-danger"),i(2),w(" ",n.status.message," ")}}function J(e,t){e&1&&f(0,"div",11)}function K(e,t){e&1&&l(0," Register ")}var ie=(()=>{let t=class t{constructor(){this.authService=h(F),this.registerForm=new P({userid:new g("",[u.required,u.minLength(4)]),password:new g("",[u.required,u.minLength(6)]),confirmPassword:new g("",[u.required,u.minLength(6)])},{validators:[this.passwordMatchValidator()]}),this.status={ok:!0,message:""},this.isLoading=!1,this.isFormSubmitted=!1}get formControls(){return this.registerForm.controls}showPasswordMismatchError(){return this.formControls.password.errors||this.formControls.confirmPassword.errors?!1:this.registerForm.errors&&this.registerForm.errors.passwordMismatch}passwordMatchValidator(){return c=>c.get("password").value===c.get("confirmPassword").value?null:{passwordMismatch:!0}}onSubmit(){if(this.isFormSubmitted=!0,this.registerForm.invalid)return;this.isLoading=!0,this.registerForm.disable();let c=this.registerForm.getRawValue();this.authService.register(c.userid,c.password).then(m=>{this.status.message=m.message,this.status.ok=m.ok,this.isLoading=!1,!this.status.ok&&this.registerForm.enable()})}};t.\u0275fac=function(m){return new(m||t)},t.\u0275cmp=_({type:t,selectors:[["app-register"]],standalone:!0,features:[S],decls:15,vars:11,consts:[[1,"my-5","d-flex","flex-column","align-items-center","gap-4",3,"formGroup","ngSubmit"],[1,"form-group","w-50"],["formControlName","userid","type","text",1,"form-control",3,"placeholder"],["class","invalid-feedback d-block"],["formControlName","password","type","password",1,"form-control",3,"placeholder"],["formControlName","confirmPassword","type","password",1,"form-control",3,"placeholder"],["class","alert w-50","role","alert",3,"ngClass"],[1,"btn","btn-secondary","w-50",3,"disabled"],["class","spinner-border","role","status"],[1,"invalid-feedback","d-block"],["role","alert",1,"alert","w-50",3,"ngClass"],["role","status",1,"spinner-border"]],template:function(m,o){m&1&&(s(0,"form",0),v("ngSubmit",function(){return o.onSubmit()}),s(1,"div",1),f(2,"input",2),d(3,G,3,2,"div",3),a(),s(4,"div",1),f(5,"input",4),d(6,U,3,2,"div",3),a(),s(7,"div",1),f(8,"input",5),d(9,z,3,2,"div",3)(10,B,2,0,"div",3),a(),d(11,H,3,2,"div",6),s(12,"button",7),d(13,J,1,0,"div",8)(14,K,1,0),a()()),m&2&&(p("formGroup",o.registerForm),i(2),p("placeholder","UserId"),i(1),r(3,o.isFormSubmitted&&o.formControls.userid.errors?3:-1),i(2),p("placeholder","Password"),i(1),r(6,o.isFormSubmitted&&o.formControls.password.errors?6:-1),i(2),p("placeholder","Confirm password"),i(1),r(9,o.isFormSubmitted&&o.formControls.confirmPassword.errors?9:-1),i(1),r(10,o.showPasswordMismatchError()?10:-1),i(1),r(11,o.status.message?11:-1),i(1),p("disabled",o.isFormSubmitted&&o.registerForm.invalid||o.registerForm.disabled),i(1),r(13,o.isLoading?13:14))},dependencies:[b,x,q,E,R,T,y,N,M,k]});let e=t;return e})();export{ie as RegisterComponent};
