import{b as x,d as y}from"./chunk-DONXXS3N.js";import{a as L,b as M,c as h,d as T,e as q,f as N,g as v,h as A,i as E,j as R,k,l as G}from"./chunk-DVK7NLWK.js";import"./chunk-EIXP5TK4.js";import{$a as c,Ba as o,Ea as _,Hb as w,Ka as u,Oa as a,Pa as s,Sa as n,Ta as l,Ua as f,Xa as S,Ya as g,_ as p,aa as C,bb as b,fb as F}from"./chunk-7FIF2LK4.js";function U(e,t){e&1&&c(0," UserId is required ")}function V(e,t){if(e&1&&(n(0,"div",8),a(1,U,1,0),l()),e&2){let m=g();o(1),s(1,m.formControls.userid.errors.required?1:-1)}}function D(e,t){e&1&&c(0," Password is required ")}function I(e,t){if(e&1&&(n(0,"div",8),a(1,D,1,0),l()),e&2){let m=g();o(1),s(1,m.formControls.password.errors.required?1:-1)}}function P(e,t){if(e&1&&(n(0,"div",9)(1,"span"),c(2),l()()),e&2){let m=g();o(2),b(" ",m.errorMessage," ")}}function j(e,t){e&1&&f(0,"div",10)}function B(e,t){e&1&&c(0," Login ")}var Z=(()=>{let t=class t{get formControls(){return this.loginForm.controls}constructor(){this.authService=p(L),this.router=p(y),this.activatedRoute=p(x),this.isAuth=this.authService.authentication().isAuthenticated,this.loginForm=new N({userid:new v("",[h.required]),password:new v("",[h.required])}),this.errorMessage="",this.isLoading=!1,this.isFormSubmitted=!1,_(()=>{if(this.authService.authentication().isAuthenticated){let d=this.activatedRoute.snapshot.queryParams.redirectUrl||"";this.router.navigateByUrl(d)}})}onSubmit(){if(this.isFormSubmitted=!0,this.loginForm.invalid)return;this.errorMessage="",this.isLoading=!0,this.loginForm.disable();let d=this.loginForm.getRawValue();this.authService.login(d.userid,d.password).then(r=>{r.ok||(this.errorMessage=r.message,this.isLoading=!1,this.loginForm.enable())})}};t.\u0275fac=function(r){return new(r||t)},t.\u0275cmp=C({type:t,selectors:[["app-login"]],standalone:!0,features:[F],decls:11,vars:8,consts:[[1,"my-5","d-flex","flex-column","align-items-center","gap-4",3,"formGroup","ngSubmit"],[1,"form-group","w-50"],["formControlName","userid","type","text",1,"form-control",3,"placeholder"],["class","invalid-feedback d-block"],["formControlName","password","type","password",1,"form-control",3,"placeholder"],["class","alert alert-danger w-50","role","alert"],[1,"btn","btn-secondary","w-50",3,"disabled"],["class","spinner-border","role","status"],[1,"invalid-feedback","d-block"],["role","alert",1,"alert","alert-danger","w-50"],["role","status",1,"spinner-border"]],template:function(r,i){r&1&&(n(0,"form",0),S("ngSubmit",function(){return i.onSubmit()}),n(1,"div",1),f(2,"input",2),a(3,V,2,1,"div",3),l(),n(4,"div",1),f(5,"input",4),a(6,I,2,1,"div",3),l(),a(7,P,3,1,"div",5),n(8,"button",6),a(9,j,1,0,"div",7)(10,B,1,0),l()()),r&2&&(u("formGroup",i.loginForm),o(2),u("placeholder","UserId"),o(1),s(3,i.isFormSubmitted&&i.formControls.userid.errors?3:-1),o(2),u("placeholder","Password"),o(1),s(6,i.isFormSubmitted&&i.formControls.password.errors?6:-1),o(1),s(7,i.errorMessage?7:-1),o(1),u("disabled",i.isFormSubmitted&&i.loginForm.invalid||i.loginForm.disabled),o(1),s(9,i.isLoading?9:10))},dependencies:[w,k,A,M,T,q,G,E,R]});let e=t;return e})();export{Z as LoginComponent};
